// Document generated by render-adoc.go from odsComponentStageScanWithSnyk.adoc.tmpl; DO NOT EDIT.

The "Snyk Security Scan" stage performs two tasks:

. It uploads your 3rd party dependencies including their licenses for monitoring. Snyk will then notify developers about new vulnerabilities per email once they are reported to the Snyk Vulnerability Database.
. It analyses your 3rd party dependencies including their licenses and breaks the build if vulnerable versions are found.

To get started, setup an organisation in https://snyk.io[snyk.io] with exactly the same name as your ODS project name. Under "Settings", create a service account for this organisation and make a note of the displayed token. Edit your `Jenkinsfile` and add the Snyk stage:
----
) { context ->
    ...
    odsComponentStageScanWithSnyk(context, [snykAuthenticationCode: <your token>])
    ...
}
----

It is recommended to read your authentication token dynamically, e.g. from an environment variable or a credential in your Jenkins master.

== Options

[cols="1,2"]
|===
| Option | Description


| *additionalFlags* +
_List<String>_
|Additional flags for the Snyk CLI. Please refer to the official Snyk CLI
 reference for possible options and don't forget to take the CLI version
 of your ODS installation into account. The value of `additionalFlags`
 must be a list in which the entries have the official flag name and a
 possible value.
 Example: `['--all-sub-projects', '--show-vulnerable-paths=all']`


| *branch* +
_String_
|Branch to run stage for.
 Example: `'master'`.
 Next to exact matches, it also supports prefixes (e.g. `feature/`) and all branches (`*`).


| *branches* +
_List<String>_
|Branches to run stage for.
 Example: `['master', 'develop']`.
 Next to exact matches, it also supports prefixes (e.g. `feature/`) and all branches (`*`).


| *buildFile* +
_String_
|Build file from which to gather dependency information. Defaults to `build.gradle`.


| *failOnVulnerabilities* +
_boolean_
|Whether to fail the build when vulnerabilities are found. Defaults to `true`.


| *organisation* +
_String_
|Name of the Snyk organisation. Default to `context.projectId`.


| *projectName* +
_String_
|Name of the Snyk project name. Default to `context.componentId`.


| *severityThreshold* +
_String_
|Severity threshold for failing. If any found vulnerability has a severity
 equal or higher to the threshold, the snyk test will return with a
 failure status. Possible values are `low`, `medium`, `high`.
 Defaults to `low`.


| *snykAuthenticationCode* +
_String_
|Required! Authentication token of a service account within your organisation.

|===
